/*
* uxTransPerf v.0.1.0
* (c) 2013, WebUX
* https://github.com/webux
* License: MIT
*/
!function(a,b){function c(){function a(a,b,c,d){var e=0;if(!x.length)throw new Error("benchmark must be executed first.");if(d)if("string"==typeof d)d===x[0].name&&(e+=1);else for(;-1!==d.indexOf(x[e].name);)e+=1;return f[x[e].index].run(a,b,c)}function b(a,b,c,d,e){return x.length?(u(x,1),v(),void 0):(t=document.createElement("p"),document.body.insertBefore(t,null),w=d||1e4,u=b,v=c,x=!e&&m()||[],s=t.offsetTop,x.length?(u(x,1),v(),void 0):(t.style.position="absolute",t.style.top="0px",t.style.left="0px",g(),void 0))}function c(a){a.style[d[e]]="",a.style.left="0px",a.style.top="0px",a.style.marginLeft="0px",a.style.martinTop="0px"}function g(){return f[A]?(h(f[A]),void 0):(A=0,C=setTimeout(i),void 0)}function h(a){var b,d="undefined";a.run(t.style,1,1),typeof t.getBoundingClientRect!==d&&(b=t.getBoundingClientRect(),a.supported=!!b.top),a.supported?A+=1:(f.splice(A,1),console.log("%s is not supported",a.id)),c(t),setTimeout(g)}function i(){var a=f.length;f[A].supported?(r={id:f[A].id,name:f[A].name,index:A,start:Date.now(),iterations:w},j(t,f[A],r.iterations),r.end=Date.now(),x[A]=r,A+=1,B=A/a,u(x,B),a>A?(clearTimeout(C),C=setTimeout(i)):(o(x),document.getElementsByTagName("body")[0].className+=" "+x[0].id,v(),n(x),document.body.removeChild(t),t=null,u=null,v=null)):console.log("%s NOT SUPPORTED",f[A].id)}function j(a,b,d){for(var e=0,f=0,g=0;d>e;)f=g+=1,b.run(a.style,f,g),e+=1;c(a)}function k(){for(var a,b,c,d=0,e=x.length,g=[];e>d;)a=x[d],b={},c=f[a.index],a.supported?c.run(b,"%x","%y"):b="NOT SUPPORTED",g.push({name:a.name,time:a.total,count:a.iterations,pattern:b}),d+=1;return g}function l(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return window.console&&console.log&&console.log(a.Description),!1}}function m(){if(!l())return void 0;var a=localStorage.getItem(z);return a&&JSON.parse(a)||void 0}function n(a){if(!l())return void 0;try{localStorage.setItem(z,JSON.stringify(a))}catch(b){return!1}return!0}function o(a){for(var b,c=0,d=a.length;d>c;)b=a[c],b.total=b.end-b.start,c+=1;return q(a,function(a,b){return a.total-b.total}),a}function p(a){for(var b,c="",d=0,e=a.length;e>d;)b=a[d],c+=b.name+": time = "+b.total+"ms\n",d+=1;return c}function q(a,b){var c,d=0,e=a.length,f=0,g=a.length-1;for(b||(b=function(a,b){return a>b?1:b>a?-1:0});e>d;){for(f=0,g=a.length-1;g>f;)b(a[f],a[f+1])>0&&(c=a[f+1],a[f+1]=a[f],a[f]=c),f+=1;d+=1}return a}var r,s,t,u,v,w,x=[],y={},z="ux-transform-perf",A=0,B=0,C=0;return y.best=a,y.benchmark=b,y.getResults=k,y.getLog=function(){return p(x)},y}b.ux=a;var d={"":"transform",webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform"},e=function(){var a,b,c=["t","webkitT","MozT","msT","OT"],d=c.length,e=document.createElement("div").style;for(b=0;d>b;b+=1)if(a=c[b]+"ransform",a in e)return c[b].substr(0,c[b].length-1);return!1}(),f=[{id:"trans",name:"translate",supported:!1,run:function(a,b,c){a[d[e]]="translate("+b+"px, "+c+"px)"}},{id:"transXY",name:"translate X/Y",supported:!1,run:function(a,b,c){a[d[e]]="translateX("+b+"px) translateY("+c+"px)"}},{id:"transXYZ",name:"translate X/Y/Z",supported:!1,run:function(a,b,c){a[d[e]]="translateX("+b+"px) translateY("+c+"px) translateZ(0)"}},{id:"transXYZ1",name:"translate x/y/z with z not zero",supported:!1,run:function(a,b,c){a[d[e]]="translateX("+b+"px) translateY("+c+"px) translateZ(0.1px)"}},{id:"transTransZ",name:"translate, translateZ",supported:!1,run:function(a,b,c){a[d[e]]="translate("+b+"px, "+c+"px) translateZ(0)"}},{id:"posLT",name:"position left/top",supported:!1,run:function(a,b,c){a.left=b+"px",a.top=c+"px"}},{id:"marginLT",name:"margin left/top",supported:!1,run:function(a,b,c){a.marginLeft=b+"px",a.marginTop=c+"px"}},{id:"trans3d",name:"translate3d",supported:!1,run:function(a,b,c){a[d[e]]="translate3d("+b+"px, "+c+"px, 0px)"}},{id:"trans3dZ1",name:"translate3d with Z not zero",supported:!1,run:function(a,b,c){a[d[e]]="translate3d("+b+"px, "+c+"px, 0.1px)"}}];a.transPerf=c();try{angular.module("ux")}catch(g){angular.module("ux",[])}ux.transPerf.events={UPDATED:"transPerf:update",COMPLETED:"transPerf:complete"},angular.module("ux").directive("uxTransPerf",["$rootScope",function(a){return{restrict:"A",template:"<div></div><div>{{percent}}</div>",scope:{},link:function(b,c,d){setTimeout(function(){ux.transPerf.benchmark(c.children()[0],function(b,c){a.$broadcast(ux.transPerf.events.UPDATED,c)},function(){ux.transPerf.best(c.children()[0].style,100,100),a.$broadcast(ux.transPerf.events.COMPLETED),b.$destroy(),c.remove()},d.uxTransPerf||1e4,!0)})}}}])}({},function(){return this}());